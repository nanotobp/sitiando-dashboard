/* ============================================================
   THEME TOKENS
============================================================ */
:root {
    --bg-body: #f5f6fa;
    --bg-sidebar: #ffffff;
    --bg-topbar: #ffffff;
    --bg-card: #ffffff;
    --bg-card-soft: #f1f3f9;

    --border-subtle: #e2e4ee;
    --text-main: #1f2430;
    --text-muted: #6b7280;

    --primary: #2563eb;
    --primary-soft: rgba(37, 99, 235, 0.08);

    --danger: #dc2626;
    --shadow-soft: 0 12px 30px rgba(15, 23, 42, 0.08);

    --border-color: #e3e3e3;
    --card-bg: #fff;
    --hover-bg: #f7f7f7;
}

body.theme-dark {
    --bg-body: #0f1114;
    --bg-sidebar: #111827;
    --bg-topbar: #111827;
    --bg-card: #1f2937;
    --bg-card-soft: #111827;

    --border-subtle: #374151;
    --text-main: #e5e7eb;
    --text-muted: #9ca3af;

    --primary: #3b82f6;
    --primary-soft: rgba(59,130,246,0.16);

    --danger: #ef4444;
    --shadow-soft: 0 12px 30px rgba(0,0,0,0.55);

    --border-color: #333;
    --card-bg: #1f1f1f;
    --hover-bg: #2a2a2a;
}

/* ============================================================
   GLOBAL
============================================================ */
*,
*::before,
*::after { box-sizing: border-box; }

html,body {
    margin:0; padding:0; height:100%;
}

.dashboard-layout {
    font-family: system-ui,-apple-system,"Inter",sans-serif;
    background: var(--bg-body);
    color: var(--text-main);
    display:flex;
}

/* ============================================================
   SIDEBAR
============================================================ */
.sidebar {
    width:260px;
    background:var(--bg-sidebar);
    border-right:1px solid var(--border-subtle);
    padding:18px 20px;
    display:flex;
    flex-direction:column;
    gap:24px;
    position:fixed; top:0; bottom:0; left:0;
}

.sidebar-logo {
    display:flex; align-items:center; gap:10px;
    font-weight:700; font-size:18px;
}

.logo-dot {
    width:24px; height:24px; border-radius:999px;
    background:var(--primary);
    box-shadow:0 0 0 4px var(--primary-soft);
}

.sidebar-user { display:flex; align-items:center; gap:10px; }

.avatar-circle {
    width:36px; height:36px; border-radius:999px;
    background:var(--primary-soft);
    color:var(--primary);
    display:flex; align-items:center; justify-content:center;
    font-weight:600;
}

.sidebar-user-name { font-size:14px; font-weight:600; }
.sidebar-user-role { font-size:12px; color:var(--text-muted); }

.sidebar-nav { display:flex; flex-direction:column; gap:4px; flex:1; }

.sidebar-link {
    display:flex; align-items:center; gap:10px;
    padding:8px 10px; text-decoration:none;
    border-radius:8px; color:var(--text-main);
    transition:0.18s ease;
}

.sidebar-link:hover {
    background:var(--primary-soft);
    color:var(--primary); transform:translateX(1px);
}

.sidebar-link.active { background:var(--primary); color:#fff; }

/* ============================================================
   MAIN + TOPBAR
============================================================ */
.main-wrapper {
    margin-left:260px; flex:1; min-height:100vh;
    display:flex; flex-direction:column;
}

.topbar {
    height:64px; background:var(--bg-topbar);
    border-bottom:1px solid var(--border-subtle);
    display:flex; justify-content:space-between; align-items:center;
    padding:0 24px; position:sticky; top:0; z-index:10;
}

.topbar-btn {
    border-radius:999px;
    border:1px solid var(--border-subtle);
    background:var(--bg-card);
    padding:6px 14px; font-size:13px;
    display:inline-flex; align-items:center; gap:6px;
    cursor:pointer; transition:0.15s ease;
}

.topbar-btn:hover {
    background:var(--primary-soft);
    border-color:var(--primary);
    transform:translateY(-1px);
}

/* ============================================================
   CONTENT WRAPPER
============================================================ */
.content-wrapper { padding:24px 24px 40px; }
.content-inner { max-width:1240px; margin:0 auto; }

.title { font-size:26px; font-weight:700; margin-bottom:20px; }
.subtitle { margin-bottom:16px; font-size:20px; font-weight:600; }

/* ============================================================
   CARDS
============================================================ */
.card {
    background:var(--bg-card);
    border-radius:14px;
    padding:18px;
    border:1px solid var(--border-subtle);
    box-shadow:var(--shadow-soft);
    transition:0.12s ease;
}

.card:hover {
    transform:translateY(-2px);
    box-shadow:0 18px 40px rgba(15,23,42,0.12);
}

/* ============================================================
   TABLES
============================================================ */
.table {
    width:100%;
    border-collapse:collapse;
    background:var(--bg-card);
    border-radius:14px;
    overflow:hidden;
    box-shadow:var(--shadow-soft);
    font-size:13px;
}

.table th, .table td {
    padding:12px 14px;
    border-bottom:1px solid var(--border-subtle);
}

.table thead { background:var(--bg-card-soft); }
.table th { font-weight:600; color:var(--text-muted); }

/* ============================================================
   BADGES
============================================================ */
.badge {
    display:inline-block;
    padding:4px 10px;
    border-radius:8px;
    font-size:12px;
    font-weight:600;
}

.badge-blue    { background:rgba(59,130,246,.15); color:#3b82f6; }
.badge-purple  { background:rgba(139,92,246,.15); color:#8b5cf6; }

/* Estados */
.badge-pending   { background:rgba(250,204,21,.18); color:#eab308; }
.badge-paid      { background:rgba(34,197,94,.18);  color:#22c55e; }
.badge-failed    { background:rgba(239,68,68,.18);  color:#ef4444; }
.badge-shipped   { background:rgba(59,130,246,.18); color:#3b82f6; }
.badge-completed { background:rgba(139,92,246,.18); color:#8b5cf6; }
.badge-refunded  { background:rgba(255,255,255,.18); color:#999; }

/* ============================================================
   TIMELINE — versión única depurada
============================================================ */
.timeline {
    padding-left:22px;
    border-left:2px solid var(--border-subtle);
    margin-top:16px;
}

.timeline-item {
    margin-bottom:20px;
    position:relative;
    opacity:0; transform:translateY(6px);
    animation:fadeSlide .45s ease forwards;
}

.timeline-item:nth-child(1){animation-delay:.05s;}
.timeline-item:nth-child(2){animation-delay:.12s;}
.timeline-item:nth-child(3){animation-delay:.18s;}
.timeline-item:nth-child(4){animation-delay:.24s;}
.timeline-item:nth-child(5){animation-delay:.30s;}

@keyframes fadeSlide {
    from { opacity:0; transform:translateY(6px); }
    to   { opacity:1; transform:translateY(0); }
}

.timeline-marker {
    width:12px; height:12px;
    background:var(--primary);
    border-radius:50%;
    position:absolute;
    left:-7px; top:3px;
}

.timeline-date { font-size:12px; color:var(--text-muted); }

/* ============================================================
   FILTERS / FORMS
============================================================ */
.filters-grid {
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
    gap:16px;
}

.form-control {
    width:100%; padding:10px 12px;
    background:var(--bg-card-soft);
    border:1px solid var(--border-subtle);
    border-radius:8px; font-size:14px;
    color:var(--text-main);
}

.form-control:focus {
    border-color:var(--primary); outline:none;
}

/* ============================================================
   PERMISSIONS UI — FINAL DEPURADO
============================================================ */
.permission-group {
    padding:20px 0;
    border-bottom:1px solid var(--border-color);
}

.permission-title {
    font-size:18px;
    font-weight:600;
    margin-bottom:15px;
}

.permission-grid {
    display:grid;
    grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
    gap:15px;
}

.permission-item {
    background:var(--card-bg);
    border:1px solid var(--border-color);
    padding:14px 18px;
    border-radius:10px;
    display:flex; justify-content:space-between; align-items:center;
    transition:0.2s ease; cursor:pointer;
}

.permission-item:hover { background:var(--hover-bg); }

.permission-info strong { font-size:15px; }
.permission-info small { color:var(--text-muted); }

/* Toggle */
.permission-item input[type="checkbox"] { display:none; }

.toggle-switch {
    position:relative;
    width:42px; height:22px;
    background:var(--border-color);
    border-radius:20px;
    transition:background .3s ease;
}

.toggle-switch::after {
    content:""; position:absolute; top:2px; left:2px;
    width:18px; height:18px;
    background:#fff;
    border-radius:50%;
    transition:transform .25s ease;
}

.permission-item input[type="checkbox"]:checked + .toggle-switch {
    background:var(--primary);
}

.permission-item input[type="checkbox"]:checked + .toggle-switch::after {
    transform:translateX(20px);
}

/* Dark mode */
.theme-dark .permission-item { background:#1f1f1f; }
.theme-dark .toggle-switch { background:#555; }
.theme-dark .toggle-switch::after { background:#e3e3e3; }

/* ============================================================
   RESPONSIVE
============================================================ */
@media (max-width:900px){
    .sidebar {
        transform:translateX(-100%);
        transition:transform .2s ease;
    }
    .sidebar.open { transform:translateX(0); }
    .main-wrapper { margin-left:0; }
}
